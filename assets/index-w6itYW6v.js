import{aH as re,e as T,_ as v,s as w,al as X,aC as ae,m as j,R as G,S as D,T as F,i as se,p as ie,d as L,P as le,V as E,f as N,z as O,a6 as q,b as f,W as C,a1 as ce,l as ue,aI as de,X as pe,aD as ge,a5 as W,F as ve,ac as _,a2 as me}from"./index-BhYHN2x7.js";import{R as he,o as fe,c as Se}from"./TextArea-DdPRsthu.js";import{i as xe,c as ye,P as $e,S as be,t as Ce,d as ze}from"./index-DthL9Zak.js";import{i as Pe}from"./compact-item-B35DVwRn.js";const we=["xxxl","xxl","xl","lg","md","sm","xs"],ke=e=>({xs:`(max-width: ${e.screenXSMax}px)`,sm:`(min-width: ${e.screenSM}px)`,md:`(min-width: ${e.screenMD}px)`,lg:`(min-width: ${e.screenLG}px)`,xl:`(min-width: ${e.screenXL}px)`,xxl:`(min-width: ${e.screenXXL}px)`,xxxl:`{min-width: ${e.screenXXXL}px}`});function Ae(){const[,e]=re();return T(()=>{const t=ke(e.value),o=new Map;let n=-1,r={};return{matchHandlers:{},dispatch(i){return r=i,o.forEach(a=>a(r)),o.size>=1},subscribe(i){return o.size||this.register(),n+=1,o.set(n,i),i(r),n},unsubscribe(i){o.delete(i),o.size||this.unregister()},unregister(){Object.keys(t).forEach(i=>{const a=t[i],s=this.matchHandlers[a];s==null||s.mql.removeListener(s==null?void 0:s.listener)}),o.clear()},register(){Object.keys(t).forEach(i=>{const a=t[i],s=g=>{let{matches:d}=g;this.dispatch(v(v({},r),{[i]:d}))},p=window.matchMedia(a);p.addListener(s),this.matchHandlers[a]={mql:p,listener:s},s(p)})},responsiveMap:t}})}function Me(){const e=w({});let t=null;const o=Ae();return X(()=>{t=o.value.subscribe(n=>{e.value=n})}),ae(()=>{o.value.unsubscribe(t)}),e}function Te(e){const t=w();return j(()=>{t.value=e()},{flush:"sync"}),t}const Be=e=>{const{antCls:t,componentCls:o,iconCls:n,avatarBg:r,avatarColor:i,containerSize:a,containerSizeLG:s,containerSizeSM:p,textFontSize:g,textFontSizeLG:d,textFontSizeSM:y,borderRadius:c,borderRadiusLG:l,borderRadiusSM:S,lineWidth:m,lineType:$}=e,h=(b,u,x)=>({width:b,height:b,lineHeight:`${b-m*2}px`,borderRadius:"50%",[`&${o}-square`]:{borderRadius:x},[`${o}-string`]:{position:"absolute",left:{_skip_check_:!0,value:"50%"},transformOrigin:"0 center"},[`&${o}-icon`]:{fontSize:u,[`> ${n}`]:{margin:0}}});return{[o]:v(v(v(v({},F(e)),{position:"relative",display:"inline-block",overflow:"hidden",color:i,whiteSpace:"nowrap",textAlign:"center",verticalAlign:"middle",background:r,border:`${m}px ${$} transparent`,"&-image":{background:"transparent"},[`${t}-image-img`]:{display:"block"}}),h(a,g,c)),{"&-lg":v({},h(s,d,l)),"&-sm":v({},h(p,y,S)),"> img":{display:"block",width:"100%",height:"100%",objectFit:"cover"}})}},Re=e=>{const{componentCls:t,groupBorderColor:o,groupOverlapping:n,groupSpace:r}=e;return{[`${t}-group`]:{display:"inline-flex",[`${t}`]:{borderColor:o},"> *:not(:first-child)":{marginInlineStart:n}},[`${t}-group-popover`]:{[`${t} + ${t}`]:{marginInlineStart:r}}}},Q=G("Avatar",e=>{const{colorTextLightSolid:t,colorTextPlaceholder:o}=e,n=D(e,{avatarBg:o,avatarColor:t});return[Be(n),Re(n)]},e=>{const{controlHeight:t,controlHeightLG:o,controlHeightSM:n,fontSize:r,fontSizeLG:i,fontSizeXL:a,fontSizeHeading3:s,marginXS:p,marginXXS:g,colorBorderBg:d}=e;return{containerSize:t,containerSizeLG:o,containerSizeSM:n,textFontSize:Math.round((i+a)/2),textFontSizeLG:s,textFontSizeSM:r,groupSpace:g,groupOverlapping:-p,groupBorderColor:d}}),U=Symbol("AvatarContextKey"),Oe=()=>se(U,{}),He=e=>ie(U,e),Le=()=>({prefixCls:String,shape:{type:String,default:"circle"},size:{type:[Number,String,Object],default:()=>"default"},src:String,srcset:String,icon:le.any,alt:String,gap:Number,draggable:{type:Boolean,default:void 0},crossOrigin:String,loadError:{type:Function}}),M=L({compatConfig:{MODE:3},name:"AAvatar",inheritAttrs:!1,props:Le(),slots:Object,setup(e,t){let{slots:o,attrs:n}=t;const r=w(!0),i=w(!1),a=w(1),s=w(null),p=w(null),{prefixCls:g}=E("avatar",e),[d,y]=Q(g),c=Oe(),l=T(()=>e.size==="default"?c.size:e.size),S=Me(),m=Te(()=>{if(typeof e.size!="object")return;const u=we.find(P=>S.value[P]);return e.size[u]}),$=u=>m.value?{width:`${m.value}px`,height:`${m.value}px`,lineHeight:`${m.value}px`,fontSize:`${u?m.value/2:18}px`}:{},h=()=>{if(!s.value||!p.value)return;const u=s.value.offsetWidth,x=p.value.offsetWidth;if(u!==0&&x!==0){const{gap:P=4}=e;P*2<x&&(a.value=x-P*2<u?(x-P*2)/u:1)}},b=()=>{const{loadError:u}=e;(u==null?void 0:u())!==!1&&(r.value=!1)};return N(()=>e.src,()=>{O(()=>{r.value=!0,a.value=1})}),N(()=>e.gap,()=>{O(()=>{h()})}),X(()=>{O(()=>{h(),i.value=!0})}),()=>{var u,x;const{shape:P,src:B,alt:V,srcset:K,draggable:Z,crossOrigin:J}=e,Y=(u=c.shape)!==null&&u!==void 0?u:P,k=q(o,e,"icon"),z=g.value,ee={[`${n.class}`]:!!n.class,[z]:!0,[`${z}-lg`]:l.value==="large",[`${z}-sm`]:l.value==="small",[`${z}-${Y}`]:!0,[`${z}-image`]:B&&r.value,[`${z}-icon`]:k,[y.value]:!0},te=typeof l.value=="number"?{width:`${l.value}px`,height:`${l.value}px`,lineHeight:`${l.value}px`,fontSize:k?`${l.value/2}px`:"18px"}:{},I=(x=o.default)===null||x===void 0?void 0:x.call(o);let A;if(B&&r.value)A=f("img",{draggable:Z,src:B,srcset:K,onError:b,alt:V,crossorigin:J},null);else if(k)A=k;else if(i.value||a.value!==1){const R=`scale(${a.value}) translateX(-50%)`,ne={msTransform:R,WebkitTransform:R,transform:R},oe=typeof l.value=="number"?{lineHeight:`${l.value}px`}:{};A=f(he,{onResize:h},{default:()=>[f("span",{class:`${z}-string`,ref:s,style:v(v({},oe),ne)},[I])]})}else A=f("span",{class:`${z}-string`,ref:s,style:{opacity:0}},[I]);return d(f("span",C(C({},n),{},{ref:p,class:ee,style:[te,$(!!k),n.style]}),[A]))}}}),Ee=e=>{const{componentCls:t,popoverBg:o,popoverColor:n,width:r,fontWeightStrong:i,popoverPadding:a,boxShadowSecondary:s,colorTextHeading:p,borderRadiusLG:g,zIndexPopup:d,marginXS:y,colorBgElevated:c}=e;return[{[t]:v(v({},F(e)),{position:"absolute",top:0,left:{_skip_check_:!0,value:0},zIndex:d,fontWeight:"normal",whiteSpace:"normal",textAlign:"start",cursor:"auto",userSelect:"text","--antd-arrow-background-color":c,"&-rtl":{direction:"rtl"},"&-hidden":{display:"none"},[`${t}-content`]:{position:"relative"},[`${t}-inner`]:{backgroundColor:o,backgroundClip:"padding-box",borderRadius:g,boxShadow:s,padding:a},[`${t}-title`]:{minWidth:r,marginBottom:y,color:p,fontWeight:i},[`${t}-inner-content`]:{color:n}})},ye(e,{colorBg:"var(--antd-arrow-background-color)"}),{[`${t}-pure`]:{position:"relative",maxWidth:"none",[`${t}-content`]:{display:"inline-block"}}}]},Ie=e=>{const{componentCls:t}=e;return{[t]:$e.map(o=>{const n=e[`${o}-6`];return{[`&${t}-${o}`]:{"--antd-arrow-background-color":n,[`${t}-inner`]:{backgroundColor:n},[`${t}-arrow`]:{background:"transparent"}}}})}},Ne=e=>{const{componentCls:t,lineWidth:o,lineType:n,colorSplit:r,paddingSM:i,controlHeight:a,fontSize:s,lineHeight:p,padding:g}=e,d=a-Math.round(s*p),y=d/2,c=d/2-o,l=g;return{[t]:{[`${t}-inner`]:{padding:0},[`${t}-title`]:{margin:0,padding:`${y}px ${l}px ${c}px`,borderBottom:`${o}px ${n} ${r}`},[`${t}-inner-content`]:{padding:`${i}px ${l}px`}}}},We=G("Popover",e=>{const{colorBgElevated:t,colorText:o,wireframe:n}=e,r=D(e,{popoverBg:t,popoverColor:o,popoverPadding:12});return[Ee(r),Ie(r),n&&Ne(r),xe(r,"zoom-big")]},e=>{let{zIndexPopupBase:t}=e;return{zIndexPopup:t+30,width:177}}),_e=()=>v(v({},ze()),{content:_(),title:_()}),Xe=L({compatConfig:{MODE:3},name:"APopover",inheritAttrs:!1,props:Pe(_e(),v(v({},Ce()),{trigger:"hover",placement:"top",mouseEnterDelay:.1,mouseLeaveDelay:.1})),setup(e,t){let{expose:o,slots:n,attrs:r}=t;const i=ue();de(e.visible===void 0),o({getPopupDomNode:()=>{var c,l;return(l=(c=i.value)===null||c===void 0?void 0:c.getPopupDomNode)===null||l===void 0?void 0:l.call(c)}});const{prefixCls:a,configProvider:s}=E("popover",e),[p,g]=We(a),d=T(()=>s.getPrefixCls()),y=()=>{var c,l;const{title:S=W((c=n.title)===null||c===void 0?void 0:c.call(n)),content:m=W((l=n.content)===null||l===void 0?void 0:l.call(n))}=e,$=!!(Array.isArray(S)?S.length:S),h=!!(Array.isArray(m)?m.length:S);return!$&&!h?null:f(ve,null,[$&&f("div",{class:`${a.value}-title`},[S]),f("div",{class:`${a.value}-inner-content`},[m])])};return()=>{const c=pe(e.overlayClassName,g.value);return p(f(be,C(C(C({},fe(e,["title","content"])),r),{},{prefixCls:a.value,ref:i,overlayClassName:c,transitionName:ge(d.value,"zoom-big",e.transitionName),"data-popover-inject":!0}),{title:y,default:n.default}))}}}),je=ce(Xe),Ge=()=>({prefixCls:String,maxCount:Number,maxStyle:{type:Object,default:void 0},maxPopoverPlacement:{type:String,default:"top"},maxPopoverTrigger:String,size:{type:[Number,String,Object],default:"default"},shape:{type:String,default:"circle"}}),H=L({compatConfig:{MODE:3},name:"AAvatarGroup",inheritAttrs:!1,props:Ge(),setup(e,t){let{slots:o,attrs:n}=t;const{prefixCls:r,direction:i}=E("avatar",e),a=T(()=>`${r.value}-group`),[s,p]=Q(r);return j(()=>{const g={size:e.size,shape:e.shape};He(g)}),()=>{const{maxPopoverPlacement:g="top",maxCount:d,maxStyle:y,maxPopoverTrigger:c="hover",shape:l}=e,S={[a.value]:!0,[`${a.value}-rtl`]:i.value==="rtl",[`${n.class}`]:!!n.class,[p.value]:!0},m=q(o,e),$=me(m).map((b,u)=>Se(b,{key:`avatar-key-${u}`})),h=$.length;if(d&&d<h){const b=$.slice(0,d),u=$.slice(d,h);return b.push(f(je,{key:"avatar-popover-key",content:u,trigger:c,placement:g,overlayClassName:`${a.value}-popover`},{default:()=>[f(M,{style:y,shape:l},{default:()=>[`+${h-d}`]})]})),s(f("div",C(C({},n),{},{class:S,style:n.style}),[b]))}return s(f("div",C(C({},n),{},{class:S,style:n.style}),[$]))}}});M.Group=H;M.install=function(e){return e.component(M.name,M),e.component(H.name,H),e};export{M as A};
